"use strict";var WPFormsCaptcha=window.WPFormsCaptcha||function(n,s){var r={removeEmptyQuestionsEvents:"wpformsPanelSwitch wpformsFieldTabToggle wpformsFieldOptionGroupToggle",init:function(){s(r.ready)},ready:function(){s("#wpforms-builder").on("change",".wpforms-field-option-captcha .wpforms-field-option-row-format select",r.formatToggle).on("click",".wpforms-field-option-row-questions .add",r.addQuestion).on("click",".wpforms-field-option-row-questions .remove",r.removeQuestion).on("input",".wpforms-field-option-row-questions .question",r.updateQuestion).on("input",".wpforms-field-option-row-questions .answer",r.updateAnswer).on("wpformsBeforeSave",r.removeEmptyQuestions),s(n).on(r.removeEmptyQuestionsEvents,r.removeEmptyQuestions)},formatToggle:function(){var t=s(this),e=t.val(),t=t.parent().data("field-id"),o=s("#wpforms-field-option-row-"+t+"-questions"),t=s("#wpforms-field-option-row-"+t+"-size");"math"===e?(o.hide().addClass("wpforms-hidden"),t.hide()):(o.show().removeClass("wpforms-hidden"),t.show())},addQuestion:function(t){t.preventDefault();var t=s(this),e=t.closest("li"),t=t.closest(".choices-list"),o=t.data("field-id"),i=t.attr("data-next-id"),e=e.clone().insertAfter(e),o="fields["+o+"][questions]["+i+"]";e.attr("data-key",i),e.find("input.question").val("").attr("name",o+"[question]"),e.find("input.answer").val("").attr("name",o+"[answer]"),t.attr("data-next-id",++i)},removeQuestion:function(t){t.preventDefault();var t=s(this),e=t.closest("li"),t=t.closest(".choices-list"),o=t.find(".question"),i=t.data("field-id"),o=r.getTotalNotEmptyQuestions(o);1<o||1===o&&0===e.find(".question").val().trim().length?(e.remove(),s("#wpforms-field-"+i).find(".wpforms-question").text(t.find(".question").val())):r.showAlert(null)},removeEmptyQuestions:function(i){s(".wpforms-field-option-captcha").each(function(t,e){const o=s(e).data("field-id");e=s("#wpforms-field-option-row-"+o+"-questions .choices-list").find("li");0===r.getNotEmptyChoices(e).length?(r.showAlert(function(){const e=this.$el;s(".jconfirm").map(function(){var t=s(this);s(e).is(t)||t.find(".btn-default").trigger("click")}),s(n).off(r.removeEmptyQuestionsEvents,r.removeEmptyQuestions),"fields"!==s("#wpforms-panels-toggle .active").data("panel")&&WPFormsBuilder.panelSwitch("fields"),WPFormsBuilder.fieldTabToggle(o),s("#wpforms-field-option-"+o+" .wpforms-field-option-group").removeClass("active"),s("#wpforms-field-option-basic-"+o).addClass("active"),s(n).on(r.removeEmptyQuestionsEvents,r.removeEmptyQuestions)}),i.preventDefault()):(e.each(function(t,e){e=s(e);r.isEmptyChoice(e)&&e.remove()}),s("#wpforms-field-"+o).find(".wpforms-question").text(e.find(".question").val()))})},updateQuestion:function(){var t=s(this),e=t.closest(".choices-list"),o=e.find(".question"),e=e.data("field-id"),i=t.val().trim();t.toggleClass("wpforms-error",!i.length),i.length&&(t.data("prev-value",i),t.is(o[0]))&&s("#wpforms-field-"+e).find(".wpforms-question").text(i)},updateAnswer:function(){var t=s(this),e=t.val().trim();t.toggleClass("wpforms-error",!e.length)},showAlert:function(t){s.alert({title:!1,content:wpforms_builder_custom_captcha.error_not_empty_question,icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:wpforms_builder.ok,btnClass:"btn-confirm",keys:["enter"],action:t}}})},getTotalNotEmptyQuestions:function(t){return t.filter(function(){return this.value.trim().length}).length},getNotEmptyChoices(t){return t.filter(function(){return!r.isEmptyChoice(s(this))})},isEmptyChoice(t){return 0===t.find(".question").val().trim().length||0===t.find(".answer").val().trim().length}};return r}(document,(window,jQuery));WPFormsCaptcha.init();