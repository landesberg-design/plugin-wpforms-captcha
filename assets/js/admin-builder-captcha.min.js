"use strict";var WPFormsCaptcha=window.WPFormsCaptcha||function(r){var a={init:function(){r(a.ready)},ready:function(){r("#wpforms-builder").on("change",".wpforms-field-option-captcha .wpforms-field-option-row-format select",a.formatToggle).on("click",".wpforms-field-option-row-questions .add",a.addQuestion).on("click",".wpforms-field-option-row-questions .remove",a.removeQuestion).on("input",".wpforms-field-option-row-questions .question",_.debounce(a.updateQuestion,300))},formatToggle:function(){var t=r(this),e=t.val(),o=t.parent().data("field-id"),t=r("#wpforms-field-option-row-"+o+"-questions"),o=r("#wpforms-field-option-row-"+o+"-size");"math"===e?(t.hide().addClass("wpforms-hidden"),o.hide()):(t.show().removeClass("wpforms-hidden"),o.show())},addQuestion:function(t){t.preventDefault();var e=r(this),o=e.closest("li"),i=e.closest(".choices-list"),t=i.data("field-id"),e=i.attr("data-next-id"),o=o.clone().insertAfter(o),t="fields["+t+"][questions]["+e+"]";o.attr("data-key",e),o.find("input.question").val("").attr("name",t+"[question]"),o.find("input.answer").val("").attr("name",t+"[answer]"),i.attr("data-next-id",++e)},removeQuestion:function(t){t.preventDefault();var e=r(this),o=e.closest("li"),i=e.closest(".choices-list"),t=i.find(".question"),e=i.data("field-id"),t=a.getTotalNotEmptyQuestions(t);if(1<t||1===t&&0===o.find(".question").val().trim().length)return o.remove(),void r("#wpforms-field-"+e).find(".wpforms-question").text(i.find(".question").val());a.showAlert(null)},updateQuestion:function(){var t=r(this),e=t.closest(".choices-list"),o=e.find(".question"),i=e.data("field-id"),n=a.getTotalNotEmptyQuestions(o),e=t.val().trim(),s=t.data("prev-value")||"";!e.length&&n<1?a.showAlert(function(){t.val(s)}):(t.data("prev-value",e),t.is(o[0])&&r("#wpforms-field-"+i).find(".wpforms-question").text(e))},showAlert:function(t){r.alert({title:!1,content:wpforms_builder_custom_captcha.error_not_empty_question,icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:wpforms_builder.ok,btnClass:"btn-confirm",keys:["enter"],action:t}}})},getTotalNotEmptyQuestions:function(t){return t.filter(function(){return this.value.trim().length}).length}};return a}((document,window,jQuery));WPFormsCaptcha.init();