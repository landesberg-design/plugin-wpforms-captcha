"use strict";var WPFormsCaptcha=window.WPFormsCaptcha||function(r,a){var l={removeEmptyQuestionsEvents:"wpformsPanelSwitch wpformsFieldTabToggle wpformsFieldOptionGroupToggle",init:function(){a(l.ready)},ready:function(){a("#wpforms-builder").on("change",".wpforms-field-option-captcha .wpforms-field-option-row-format select",l.formatToggle).on("click",".wpforms-field-option-row-questions .add",l.addQuestion).on("click",".wpforms-field-option-row-questions .remove",l.removeQuestion).on("input",".wpforms-field-option-row-questions .question",l.updateQuestion).on("input",".wpforms-field-option-row-questions .answer",l.updateAnswer).on("wpformsBeforeSave",l.removeEmptyQuestions),a(r).on(l.removeEmptyQuestionsEvents,l.removeEmptyQuestions)},formatToggle:function(){var t=a(this),e=t.val(),t=t.parent().data("field-id"),o=a("#wpforms-field-option-row-"+t+"-questions"),t=a("#wpforms-field-option-row-"+t+"-size");"math"===e?(o.hide().addClass("wpforms-hidden"),t.hide()):(o.show().removeClass("wpforms-hidden"),t.show())},addQuestion:function(t){t.preventDefault();var t=a(this),e=t.closest("li"),t=t.closest(".choices-list"),o=t.data("field-id"),i=t.attr("data-next-id"),e=e.clone().insertAfter(e),o="fields["+o+"][questions]["+i+"]";e.attr("data-key",i),e.find("input.question").val("").attr("name",o+"[question]"),e.find("input.answer").val("").attr("name",o+"[answer]"),t.attr("data-next-id",++i)},removeQuestion:function(t){t.preventDefault();var t=a(this),e=t.closest("li"),t=t.closest(".choices-list"),o=t.find(".question"),i=t.data("field-id"),o=l.getTotalNotEmptyQuestions(o);1<o||1===o&&0===e.find(".question").val().trim().length?(e.remove(),a("#wpforms-field-"+i).find(".wpforms-question").text(t.find(".question").val())):l.showAlert(null)},removeEmptyQuestions:function(s){const t=a(".wpforms-field-option-captcha");t.each(function(t,e){const o=a(e).data("field-id"),i=a("#wpforms-field-option-row-"+o+"-questions .choices-list"),n=i.find("li");0===l.getNotEmptyChoices(n).length?(l.showAlert(function(){const e=this.$el;a(".jconfirm").map(function(){const t=a(this);a(e).is(t)||t.find(".btn-default").trigger("click")}),a(r).off(l.removeEmptyQuestionsEvents,l.removeEmptyQuestions),"fields"!==a("#wpforms-panels-toggle .active").data("panel")&&WPFormsBuilder.panelSwitch("fields"),WPFormsBuilder.fieldTabToggle(o),a("#wpforms-field-option-"+o+" .wpforms-field-option-group").removeClass("active"),a("#wpforms-field-option-basic-"+o).addClass("active"),a(r).on(l.removeEmptyQuestionsEvents,l.removeEmptyQuestions)}),s.preventDefault()):(n.each(function(t,e){const o=a(e);l.isEmptyChoice(o)&&o.remove()}),a("#wpforms-field-"+o).find(".wpforms-question").text(n.find(".question").val()))})},updateQuestion:function(){const t=a(this),e=t.closest(".choices-list"),o=e.find(".question"),i=e.data("field-id"),n=t.val().trim();t.toggleClass("wpforms-error",!n.length),n.length&&(t.data("prev-value",n),t.is(o[0])&&a("#wpforms-field-"+i).find(".wpforms-question").text(n))},updateAnswer:function(){const t=a(this),e=t.val().trim();t.toggleClass("wpforms-error",!e.length)},showAlert:function(t){a.alert({title:!1,content:wpforms_builder_custom_captcha.error_not_empty_question,icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:wpforms_builder.ok,btnClass:"btn-confirm",keys:["enter"],action:t}}})},getTotalNotEmptyQuestions:function(t){return t.filter(function(){return this.value.trim().length}).length},getNotEmptyChoices(t){return t.filter(function(){return!l.isEmptyChoice(a(this))})},isEmptyChoice(t){return 0===t.find(".question").val().trim().length||0===t.find(".answer").val().trim().length}};return l}(document,(window,jQuery));WPFormsCaptcha.init();